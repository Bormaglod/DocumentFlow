{
  "name": "production_operation",
  "viewer": {
    "dataset": {
      "select": "select po.id, po.status_id, s.note as status_name, po.date_updated, g.name as goods_name, o.name as operation_name, po.amount, po.completed, round(po.completed * 100 / po.amount) as complete_status from production_operation po join status s on (s.id = po.status_id) join goods g on (g.id = po.goods_id) join operation o on (o.id = po.operation_id) where po.owner_id = :owner_id",
      "select-id": "select po.id, po.status_id, s.note as status_name, po.date_updated, g.name as goods_name, o.name as operation_name, po.amount, po.completed, round(po.completed * 100 / po.amount) as complete_status from production_operation po join status s on (s.id = po.status_id) join goods g on (g.id = po.goods_id) join operation o on (o.id = po.operation_id) where po.id = :id"
    },
    "data-type": "Document",
    "allow-grouping": true,
    "toolbar": {
      "button-style": "Image",
      "icon-size": "Small"
    },
    "commandbar-visible": false,
    "columns": [
      {
        "datafield": "id",
        "text": "Id",
        "type": "Text",
        "width": 180,
        "visible": false
      },
      {
        "datafield": "status_id",
        "text": "Код состояния",
        "type": "Integer",
        "width": 80,
        "visible": false,
        "allow-grouping": true
      },
      {
        "datafield": "status_name",
        "text": "Состояние",
        "type": "Text",
        "width": 110,
        "visible": false,
        "allow-grouping": true
      },
      {
        "datafield": "date_updated",
        "text": "Дата",
        "type": "Date",
        "width": 150,
        "hideable": false
      },
      {
        "datafield": "goods_name",
        "text": "Изделие",
        "type": "Text",
        "width": 150,
        "visible": false,
        "allow-grouping": true
      },
      {
        "datafield": "operation_name",
        "text": "Операция",
        "type": "Text",
        "hideable": false,
        "auto-size": true,
        "aggregate": "Count",
        "aggregate-title": "Всего наименований: "
      },
      {
        "datafield": "amount",
        "text": "Количество",
        "type": "Integer",
        "width": 150,
        "horizontal-align": "Right"
      },
      {
        "datafield": "completed",
        "text": "Выполнено",
        "type": "Integer",
        "width": 150,
        "horizontal-align": "Right"
      },
      {
        "datafield": "complete_status",
        "text": "Выполнено, %",
        "type": "progress",
        "width": 150
      }
    ],
    "groups": [ "goods_name" ],
    "sorts": [
      {
        "name": "date_updated",
        "direction": "Descending"
      }
    ]
  }
}