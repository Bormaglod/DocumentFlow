{
  "name": "account",
  "viewer": {
    "dataset": {
      "select": "select a.id, a.status_id, s.note as status_name, a.name, a.account_value, b.name as bank_name from account a join status s on (s.id = a.status_id) left join bank b on (b.id = a.bank_id) where a.owner_id = :owner_id",
      "select-id": "select a.id, a.status_id, s.note as status_name, a.name, a.account_value, b.name as bank_name from account a join status s on (s.id = a.status_id) left join bank b on (b.id = a.bank_id) where a.id = :id"
    },
    "data-type": "Directory",
    "toolbar": {
      "button-style": "Image",
      "icon-size": "Small"
    },
    "commandbar-visible": false,
    "columns": [
      {
        "datafield": "id",
        "text": "Id",
        "type": "Text",
        "width": 180,
        "visible": false
      },
      {
        "datafield": "status_id",
        "text": "Код состояния",
        "type": "Integer",
        "width": 80,
        "visible": false
      },
      {
        "datafield": "status_name",
        "text": "Состояние",
        "type": "Text",
        "width": 110,
        "visible": false
      },
      {
        "datafield": "name",
        "text": "Наименование",
        "type": "Text",
        "hideable": false,
        "width": 200
      },
      {
        "datafield": "account_value",
        "text": "Расчётный счёт",
        "type": "Numeric",
        "width": 200
      },
      {
        "datafield": "bank_name",
        "text": "Банк",
        "type": "Text",
        "auto-size": true
      }
    ]
  },
  "editor": {
    "dataset": {
      "select": "select a.id, a.name, a.account_value, a.bank_id, c.name as company_name from account a join company c on (c.id = a.owner_id) where a.id = :id",
      "update": "update account set name = :name, account_value = :account_value, bank_id = :bank_id where id = :id"
    },
    "controls": [
      {
        "type": "TextBox",
        "text": "Контрагент",
        "datafield": "company_name",
        "label-width": 120,
        "enabled": false
      },
      {
        "type": "TextBox",
        "text": "Наименование",
        "datafield": "name",
        "label-width": 120,
        "edit-width": 400
      },
      {
        "type": "Numeric",
        "text": "Номер счета",
        "datafield": "account_value",
        "label-width": 120,
        "edit-width": 250,
        "decimal-digits": 0
      },
      {
        "type": "ComboBoxData",
        "text": "Банк",
        "datafield": "bank_id",
        "dataset": "select id, name from bank where status_id = 1002",
        "label-width": 120,
        "edit-width": 330
      }
    ],
    "conditions": [
      {
        "controls": [ "name", "account_value", "bank_id" ],
        "enable": {
          "states": [ "compiled" ]
        }
      }
    ]
  }
}