{"$id": "report", "Created": "2021-02-12T23:05:22+04:00", "Modified": "2021-02-12T23:05:00+04:00", "ReportPage": {"$id": "rp", "Title": "[Title.doc_name]", "Report": {"$ref": "report"}, "PageSize": {"Name": "A4", "Orientation": "Portrait"}, "DataBands": {"$id": "dbs", "$values": [{"Footer": {"$id": "dbf", "Font": {"Name": "Calibri", "Style": "Bold"}, "Name": "Footer1", "Page": {"$ref": "rp"}, "Height": 7.5, "TextObjects": {"$id": "dbfto", "$values": [{"Band": {"$ref": "dbf"}, "Name": "Text_DBF_1", "Text": "Итого", "Width": 160, "Height": 7.5, "Borders": {"Top": true, "Right": true, "Bottom": true, "ColorName": "Silver"}, "VerticalAlignment": "Middle"}, {"Band": {"$ref": "dbf"}, "Left": 160, "Name": "Text_DBF_2", "Text": "[Header.summary]", "Width": 30, "Height": 7.5, "Borders": {"Top": true, "Left": true, "Bottom": true, "ColorName": "Silver"}, "VerticalAlignment": "Middle", "HorizontalAlignment": "Right"}]}}, "Header": {"$id": "dbh", "Font": {"Name": "Calibri", "Style": "Bold"}, "Name": "Header1", "Page": {"$ref": "rp"}, "Height": 7.5, "TextObjects": {"$id": "dbhto", "$values": [{"Band": {"$ref": "dbh"}, "Name": "Text_DBH_1", "Text": "№ п/п", "Width": 12.5, "Height": 7.5, "Borders": {"Top": true, "Right": true, "Bottom": true, "ColorName": "Silver"}, "VerticalAlignment": "Middle", "HorizontalAlignment": "Center"}, {"Band": {"$ref": "dbh"}, "Left": 12.5, "Name": "Text_DBH_2", "Text": "Наименование товара", "Width": 77.5, "Height": 7.5, "Borders": {"All": true, "ColorName": "Silver"}, "VerticalAlignment": "Middle"}, {"Band": {"$ref": "dbh"}, "Left": 90, "Name": "Text_DBH_3", "Text": "Ед. изм.", "Width": 17.5, "Height": 7.5, "Borders": {"All": true, "ColorName": "Silver"}, "VerticalAlignment": "Middle", "HorizontalAlignment": "Center"}, {"Band": {"$ref": "dbh"}, "Left": 107.5, "Name": "Text_DBH_4", "Text": "Количество", "Width": 25, "Height": 7.5, "Borders": {"All": true, "ColorName": "Silver"}, "VerticalAlignment": "Middle", "HorizontalAlignment": "Center"}, {"Band": {"$ref": "dbh"}, "Left": 132.5, "Name": "Text_DBH_5", "Text": "Цена", "Width": 27.5, "Height": 7.5, "Borders": {"All": true, "ColorName": "Silver"}, "VerticalAlignment": "Middle", "HorizontalAlignment": "Center"}, {"Band": {"$ref": "dbh"}, "Left": 160, "Name": "Text_DBH_6", "Text": "Сумма", "Width": 30, "Height": 7.5, "Borders": {"Top": true, "Left": true, "Bottom": true, "ColorName": "Silver"}, "VerticalAlignment": "Middle", "HorizontalAlignment": "Center"}]}}, "DataBand": {"$id": "db", "Font": {"Name": "Calibri"}, "Name": "Data1", "Page": {"$ref": "rp"}, "Height": 7.5, "CanGrow": true, "DataSource": "Details", "TextObjects": {"$id": "dbto", "$values": [{"Band": {"$ref": "db"}, "Name": "Text_DB_1", "Text": "[Details.row_number]", "Width": 12.5, "Height": 7.5, "Borders": {"Top": true, "Right": true, "Bottom": true, "ColorName": "Silver"}, "Padding": {"Top": 1, "Left": 2, "Right": 2, "Bottom": 1}, "GrowToBottom": true, "VerticalAlignment": "Middle", "HorizontalAlignment": "Center"}, {"Band": {"$ref": "db"}, "Left": 12.5, "Name": "Text_DB_2", "Text": "[Details.name]", "Width": 77.5, "Height": 7.5, "Borders": {"All": true, "ColorName": "Silver"}, "CanGrow": true, "Padding": {"Top": 1, "Left": 2, "Right": 2, "Bottom": 1}, "WordWrap": "Word", "GrowToBottom": true, "VerticalAlignment": "Middle"}, {"Band": {"$ref": "db"}, "Left": 90, "Name": "Text_DB_3", "Text": "[Details.abbreviation]", "Width": 17.5, "Height": 7.5, "Borders": {"All": true, "ColorName": "Silver"}, "Padding": {"Top": 1, "Left": 2, "Right": 2, "Bottom": 1}, "GrowToBottom": true, "VerticalAlignment": "Middle", "HorizontalAlignment": "Center"}, {"Band": {"$ref": "db"}, "Left": 107.5, "Name": "Text_DB_4", "Text": "[Details.amount]", "Width": 25, "Height": 7.5, "Borders": {"All": true, "ColorName": "Silver"}, "Padding": {"Top": 1, "Left": 2, "Right": 2, "Bottom": 1}, "GrowToBottom": true, "VerticalAlignment": "Middle", "HorizontalAlignment": "Right"}, {"Band": {"$ref": "db"}, "Left": 132.5, "Name": "Text_DB_5", "Text": "[Details.goods_price]", "Width": 27.5, "Height": 7.5, "Borders": {"All": true, "ColorName": "Silver"}, "Padding": {"Top": 1, "Left": 2, "Right": 2, "Bottom": 1}, "GrowToBottom": true, "VerticalAlignment": "Middle", "HorizontalAlignment": "Right"}, {"Band": {"$ref": "db"}, "Left": 160, "Name": "Text_DB_6", "Text": "[Details.cost_with_tax]", "Width": 30, "Height": 7.5, "Borders": {"Top": true, "Left": true, "Bottom": true, "ColorName": "Silver"}, "Padding": {"Top": 1, "Left": 2, "Right": 2, "Bottom": 1}, "GrowToBottom": true, "VerticalAlignment": "Middle", "HorizontalAlignment": "Right"}]}}}]}, "ReportSummary": {"$id": "rs", "Font": {"Name": "Calibri"}, "Name": "ReportSummary1", "Page": {"$ref": "rp"}, "Height": 15, "TextObjects": {"$id": "rsto", "$values": [{"Top": 10, "Band": {"$ref": "rs"}, "Name": "Text_RS_1", "Text": "Сдал", "Width": 12.5, "Height": 5, "VerticalAlignment": "Middle"}, {"Top": 10, "Band": {"$ref": "rs"}, "Left": 12.5, "Name": "Text_RS_2", "Width": 40, "Height": 5, "Borders": {"Bottom": true}}, {"Top": 10, "Band": {"$ref": "rs"}, "Left": 90, "Name": "Text_RS_3", "Text": "Принял", "Width": 17.5, "Height": 5, "VerticalAlignment": "Middle"}, {"Top": 10, "Band": {"$ref": "rs"}, "Left": 107.5, "Name": "Text_RS_4", "Width": 40, "Height": 5, "Borders": {"Bottom": true}}]}}, "ReportTitleBand": {"$id": "rtb", "Font": {"Name": "Calibri"}, "Name": "ReportTitle1", "Page": {"$ref": "rp"}, "Height": 37.5, "TextObjects": {"$id": "rtbto", "$values": [{"Band": {"$ref": "rtb"}, "Name": "Text_RTB_1", "Text": "Организация", "Width": 22.5, "Height": 5, "VerticalAlignment": "Middle"}, {"Band": {"$ref": "rtb"}, "Left": 22.5, "Name": "Text_RTB_2", "Text": "[Header.org_name]", "Width": 132.5, "Height": 5, "Borders": {"Bottom": true}, "VerticalAlignment": "Middle"}, {"Top": 10, "Band": {"$ref": "rtb"}, "Font": {"Name": "Calibri", "Size": 12, "Style": "Bold"}, "Name": "Text_RTB_3", "Text": "Накладная № [Header.doc_number] от [Header.doc_date]", "Width": 190, "Height": 5.5, "VerticalAlignment": "Middle"}, {"Top": 20, "Band": {"$ref": "rtb"}, "Name": "Text_RTB_7", "Text": "От кого", "Width": 17.5, "Height": 5, "VerticalAlignment": "Middle"}, {"Top": 20, "Band": {"$ref": "rtb"}, "Left": 17.5, "Name": "Text_RTB_8", "Text": "[Header.org_name]", "Width": 85, "Height": 5, "Borders": {"Bottom": true}, "VerticalAlignment": "Middle"}, {"Top": 27.5, "Band": {"$ref": "rtb"}, "Name": "Text_RTB_9", "Text": "Кому", "Width": 12.5, "Height": 5, "VerticalAlignment": "Middle"}, {"Top": 27.5, "Band": {"$ref": "rtb"}, "Left": 12.5, "Name": "Text_RTB_10", "Text": "[Header.contractor_name]", "Width": 90, "Height": 5, "Borders": {"Bottom": true}, "VerticalAlignment": "Middle"}]}}}, "ReportDictionary": {"Parameters": {"$id": "rdp", "$values": [{"Name": "InvoiceId", "DataType": "Guid"}]}, "Connections": {"$id": "rdc", "$values": [{"Name": "Connection", "Sources": {"$id": "rdc_sources", "$values": [{"Name": "Header", "Columns": {"$id": "rdc_sources_header", "$values": [{"Name": "doc_number", "DataType": "string"}, {"Name": "doc_date", "DataType": "DateTime"}, {"Name": "org_name", "DataType": "string"}, {"Name": "contractor_name", "DataType": "string"}, {"Name": "summary", "DataType": "decimal"}]}, "Parameters": {"$id": "rdc_sources_header_params", "$values": ["InvoiceId"]}, "SelectCommand": "select i.doc_number, to_char(i.doc_date, 'DD.MM.YYYY') as doc_date, o.short_name as org_name, c.short_name as contractor_name, sum(isd.cost_with_tax) as summary from invoice_sales i join organization o on (o.id = i.organization_id) left join contractor c on (c.id = i.contractor_id) join invoice_sales_detail isd on (isd.owner_id = i.id) where i.id = :InvoiceId group by i.doc_number, i.doc_date, o.short_name, c.short_name"}, {"Name": "Details", "Columns": {"$id": "rdc_sources_details", "$values": [{"Name": "row_number", "DataType": "long"}, {"Name": "code", "DataType": "string"}, {"Name": "name", "DataType": "string"}, {"Name": "abbreviation", "DataType": "string"}, {"Name": "amount", "DataType": "decimal"}, {"Name": "goods_price", "DataType": "decimal"}, {"Name": "cost_with_tax", "DataType": "decimal"}]}, "Parameters": {"$id": "rdc_sources_details_params", "$values": ["InvoiceId"]}, "SelectCommand": "select row_number() over(), g.code, g.name, m.abbreviation, isd.amount, round(isd.cost_with_tax / isd.amount, 2) as goods_price, isd.cost_with_tax from invoice_sales_detail isd join goods g on (g.id = isd.goods_id) left join measurement m on (m.id = g.measurement_id) where isd.owner_id = :InvoiceId"}, {"Name": "Title", "Columns": {"$id": "rdc_sources_title", "$values": [{"Name": "doc_name", "DataType": "string"}]}, "Parameters": {"$id": "rdc_sources_title_params", "$values": ["InvoiceId"]}, "SelectCommand": "select 'Накладная №' || d.doc_number || ' от ' || to_char(d.doc_date, 'DD.MM.YYYY') as doc_name from document d where d.id = :InvoiceId"}]}, "ConnectionStringType": "Current"}]}}}